(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(26),n=a.n(r),s=(a(31),a(7)),i=a(3),o=a.n(i),u=a(6),j=a(2),l=a(5),d=a.n(l);var b=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)(!1),s=Object(j.a)(n,2),i=s[0],l=s[1],b=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()("/api/products");case 2:t=e.sent,r(t.data.products);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b()}),[]),{products:[a,r],callback:[i,l]}},p=a(8),O=a(12);var h=function(e){var t=Object(c.useState)(!1),a=Object(j.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!1),i=Object(j.a)(s,2),l=i[0],b=i[1],h=Object(c.useState)(""),x=Object(j.a)(h,2),m=x[0],f=x[1],v=Object(c.useState)(),g=Object(j.a)(v,2),k=g[0],y=g[1],w=Object(c.useState)([]),N=Object(j.a)(w,2),C=N[0],A=N[1];Object(c.useEffect)((function(){if(e){var t=function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/user/infor",{headers:{Authorization:e}});case 3:a=t.sent,f(a.data.name),y(a.data.id),n(!0),1===a.data.role?b(!0):b(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),alert(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]);var S=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",alert("Entre para continuar comprando."));case 2:if(!a){t.next=8;break}return A([].concat(Object(O.a)(C),[Object(p.a)(Object(p.a)({},a),{},{quantity:1})])),t.next=6,d.a.patch("/user/addcart",{cart:[].concat(Object(O.a)(C),[Object(p.a)(Object(p.a)({},a),{},{quantity:1})])},{headers:{Authorization:e}});case 6:t.next=9;break;case 8:return t.abrupt("return",alert("Produto adicionado no carrinho."));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{isLogged:[r,n],isAdmin:[l,b],cart:[C,A],name:[m,f],id:[k,y],addCart:S}};var x=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)(!1),s=Object(j.a)(n,2),i=s[0],l=s[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/category");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),{categories:[a,r],callback:[i,l]}},m=a(0),f=Object(c.createContext)(),v=function(e){var t=e.children,a=Object(c.useState)(!1),r=Object(j.a)(a,2),n=r[0],s=r[1];Object(c.useEffect)((function(){var e=function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d()("/user/refresh_token");case 2:a=t.sent,s(a.data.accesstoken),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}),[]);var i={token:[n,s],productsAPI:b(),userAPI:h(n),categoriesAPI:x()};return Object(m.jsx)(f.Provider,{value:i,children:t})},g=a.p+"static/media/menu.e8db7520.svg",k=a.p+"static/media/close.ea7c95d7.svg",y=a.p+"static/media/cart.d146d6c3.svg";var w=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e.userAPI.isLogged,1)[0],a=Object(j.a)(e.userAPI.isAdmin,1)[0],r=Object(j.a)(e.userAPI.name,1)[0],n=Object(j.a)(e.userAPI.id,1)[0],i=Object(j.a)(e.userAPI.cart,1)[0],l=Object(c.useState)(!1),b=Object(j.a)(l,2),p=(b[0],b[1],function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(m.jsxs)("header",{children:[Object(m.jsx)("div",{className:"menu",children:Object(m.jsx)("img",{src:g,alt:"",width:"30"})}),Object(m.jsx)("div",{className:"logo",children:t?Object(m.jsx)("h1",{children:Object(m.jsx)(s.b,{to:"/",children:r})}):Object(m.jsx)("h1",{children:Object(m.jsx)(s.b,{to:"/",children:a?r:"Zoeirapet"})})}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/",children:a?"Produtos":"Loja"})}),a&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/create_product",children:"Criar Produto"})}),Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/category",children:"Categoria"})})]}),t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/history",children:"Historico"})}),Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/profile/".concat(n),children:"Perfil"})}),Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/",onClick:p,children:"Logout"})})]}):Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/login",children:"Logar / Registrar"})}),Object(m.jsx)("li",{children:Object(m.jsx)("img",{src:k,alt:"",width:"30",className:"menu"})})]}),a?"":Object(m.jsxs)("div",{className:"cart-icon",children:[" ",Object(m.jsx)("span",{children:i})," ",Object(m.jsxs)(s.b,{to:"/cart",children:[" ",Object(m.jsx)("img",{src:y,alt:"",width:"30"})," "]})," "]})]})},N=a(4),C=a(11);var A=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(j.a)(e,2),a=t[0],r=t[1],n=function(e){var t=e.target,c=t.name,n=t.value;r(Object(p.a)(Object(p.a)({},a),{},Object(C.a)({},c,n)))},i=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/login",Object(p.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"login-page",children:Object(m.jsxs)("form",{onSubmit:i,children:[Object(m.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:n}),Object(m.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Senha",value:a.password,autoComplete:"on",onChange:n}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("button",{type:"submit",children:"Logar"}),Object(m.jsx)(s.b,{to:"/register",children:"Registrar"})]})]})})};var S=function(e){var t=e.product,a=e.deleteProduct,r=Object(c.useContext)(f),n=Object(j.a)(r.userAPI.isAdmin,1)[0],i=r.userAPI.addCart;return Object(m.jsx)("div",{className:"row_btn",children:n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.b,{id:"btn_buy",to:"/",className:"exclude",onClick:a,children:"Excluir"}),Object(m.jsx)(s.b,{id:"btn_view",to:"/edit_product/".concat(t.id),children:"Editar"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.b,{id:"btn_buy",className:"buy",to:"#!",onClick:function(e){i(t)},children:"Comprar"}),Object(m.jsx)(s.b,{id:"btn_view",to:"/detail/".concat(t.id),children:"Visualizar"})]})})};var P=function(e){var t=e.product,a=e.isAdmin,c=e.token,r=e.callback,n=e.setCallback,s=function(){var e=Object(u.a)(o.a.mark((function e(){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=d.a.post("/api/destroy",{public_id:t.images.public_id},{headers:{Authorization:c}}),s=d.a.delete("/api/products/".concat(t.id),{headers:{Authorization:c}}),e.next=5,a;case 5:return e.next=7,s;case 7:n(!r),alert("Produto excluido com sucesso, recarregue a p\xe1gina."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"product_card",children:[a&&Object(m.jsx)("input",{type:"checkbox",checked:t.checked}),Object(m.jsx)("img",{src:t.images.url,alt:""}),Object(m.jsxs)("div",{className:"product_box",children:[Object(m.jsx)("h2",{title:t.title,children:t.title}),Object(m.jsxs)("span",{children:["R$",t.price]}),Object(m.jsx)("p",{children:t.description})]}),Object(m.jsx)(S,{product:t,deleteProduct:s})]})};var q=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e.productsAPI.products,1)[0],a=Object(j.a)(e.userAPI.isAdmin,1)[0],r=Object(j.a)(e.token,1)[0],n=Object(j.a)(e.productsAPI.callback,2),s=n[0],i=n[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"products",children:t.map((function(e){return Object(m.jsx)(P,{product:e,isAdmin:a,token:r,callback:s,setCallback:i},e.id)}))}),0===t.length&&Object(m.jsx)("h1",{children:"Nenhum produto disponivel"})]})};var I=function(){var e=Object(c.useState)({name:"",email:"",password:"",repeatPassword:""}),t=Object(j.a)(e,2),a=t[0],r=t[1],n=function(e){var t=e.target,c=t.name,n=t.value;r(Object(p.a)(Object(p.a)({},a),{},Object(C.a)({},c,n)))},i=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/register",Object(p.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"login-page",children:Object(m.jsxs)("form",{onSubmit:i,children:[Object(m.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Usu\xe1rio",value:a.name,onChange:n}),Object(m.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:n}),Object(m.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Senha",value:a.password,autoComplete:"on",onChange:n}),Object(m.jsx)("input",{type:"password",name:"repeatPassword",required:!0,placeholder:"Repita a senha",value:a.repeatPassword,autoComplete:"on",onChange:n}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("button",{type:"submit",children:"Registrar"}),Object(m.jsx)(s.b,{to:"/login",children:"Login"})]})]})})};var _=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e.userAPI.cart,2),a=t[0],r=t[1],n=Object(c.useState)(0),i=Object(j.a)(n,2),l=i[0],b=i[1],p=Object(j.a)(e.token,1)[0],h=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.patch("/user/addcart",{cart:t},{headers:{Authorization:p}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){!function(){var e=a.reduce((function(e,t){return e+t.price*t.quantity}),0);b(e)}()}),[a]),0===a.length?Object(m.jsx)("h2",{style:{textAlign:"center",fontSize:"5rem"},children:"Carrinho Vazio"}):Object(m.jsxs)("div",{children:[a.map((function(e){return Object(m.jsxs)("div",{className:"detail cart",children:[Object(m.jsx)("img",{src:e.images.url,alt:""}),Object(m.jsxs)("div",{className:"box-detail",children:[Object(m.jsx)("h2",{children:e.title}),Object(m.jsxs)("h3",{children:["R$ ",e.price*e.quantity]}),Object(m.jsx)("p",{children:e.description}),Object(m.jsx)("p",{children:e.content}),Object(m.jsxs)("div",{className:"amount",children:[Object(m.jsx)("button",{onClick:function(){return t=e.id,a.forEach((function(e){e.id===t&&(1===e.quantity?e.quantity=1:e.quantity-=1)})),r(Object(O.a)(a)),void h(a);var t},children:" - "}),Object(m.jsx)("span",{children:e.quantity}),Object(m.jsx)("button",{onClick:function(){return t=e.id,a.forEach((function(e){e.id===t&&(e.quantity+=1)})),r(Object(O.a)(a)),void h(a);var t},children:" + "})]}),Object(m.jsx)("div",{className:"delete",onClick:function(){return t=e.id,void(window.confirm("Tem certeza que quer deletar esse produto?")&&(a.forEach((function(e,c){e.id===t&&a.splice(c,1)})),r(Object(O.a)(a)),h(a)));var t},children:" X "})]})]},e.id)})),Object(m.jsxs)("div",{className:"total",children:[Object(m.jsxs)("h3",{children:["Total: R$ ",l]}),Object(m.jsx)(s.b,{to:"#",children:"Pagamento"})]})]})};var z=function(){return Object(m.jsx)("div",{children:"404 | Not Found"})};var E=function(){var e=Object(N.g)(),t=Object(c.useContext)(f),a=Object(j.a)(t.productsAPI.products,1)[0],r=Object(c.useState)([]),n=Object(j.a)(r,2),i=n[0],o=n[1];return Object(c.useEffect)((function(){e.id&&a.forEach((function(t){t.id.toString()===e.id&&o(t)}))}),[e.id,a]),0===i.length?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("img",{src:i.images.url,alt:""}),Object(m.jsxs)("div",{className:"box-detail",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("h2",{children:i.title}),Object(m.jsxs)("h6",{children:["#id: ",i.product_id]})]}),Object(m.jsxs)("span",{children:["R$ ",i.price]}),Object(m.jsx)("p",{children:i.description}),Object(m.jsx)("p",{children:i.content}),Object(m.jsxs)("p",{children:["Vendidos: ",i.sold]}),Object(m.jsx)(s.b,{to:"/cart",className:"cart",children:"Comprar"})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Produtos Similares"}),Object(m.jsx)("div",{className:"products",children:a.map((function(e){return e.category===i.category?Object(m.jsx)(P,{product:e},e.id):null}))})]})]})};var F=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e.categoriesAPI.categories,1)[0],a=Object(c.useState)(""),r=Object(j.a)(a,2),n=r[0],s=r[1],i=Object(j.a)(e.token,1)[0],l=Object(j.a)(e.categoriesAPI.callback,2),b=l[0],p=l[1],O=Object(c.useState)(!1),h=Object(j.a)(O,2),x=h[0],v=h[1],g=Object(c.useState)(""),k=Object(j.a)(g,2),y=k[0],w=k[1],N=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!x){e.next=9;break}return e.next=5,d.a.put("/api/category/".concat(y),{name:n},{headers:{Authorization:i}});case 5:a=e.sent,alert(a.data.msg),e.next=13;break;case 9:return e.next=11,d.a.post("/api/category",{name:n},{headers:{Authorization:i}});case 11:c=e.sent,alert(c.data.msg);case 13:v(!1),s(""),p(!b),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(t),s(a),v(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.delete("/api/category/".concat(t),{headers:{Authorization:i}});case 3:a=e.sent,alert(a.data.msg),p(!b),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"categories",children:[Object(m.jsxs)("form",{onSubmit:N,children:[Object(m.jsx)("label",{htmlFor:"category",children:"Categorias"}),Object(m.jsx)("input",{type:"text",name:"category",value:n,required:!0,onChange:function(e){return s(e.target.value)}}),Object(m.jsx)("button",{type:"submit",children:x?"Atualizar":"Criar"})]}),Object(m.jsx)("div",{className:"col",children:t.map((function(e){return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("p",{children:e.name}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){return C(e.id,e.name)},children:"Editar"}),Object(m.jsx)("button",{onClick:function(){return A(e.id)},children:"Deletar"})]})]},e.id)}))})]})};a(52);var V=function(){return Object(m.jsx)("div",{className:"load-page",children:Object(m.jsx)("div",{className:"loader",children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{})})})})})})})})})})},D={product_id:"",title:"",price:0,description:"",content:"",category:"",id:"",UserId:""};var L=function(){var e=Object(c.useContext)(f),t=Object(c.useState)(D),a=Object(j.a)(t,2),r=a[0],n=a[1],s=Object(j.a)(e.categoriesAPI.categories,1)[0],i=Object(c.useState)(!1),l=Object(j.a)(i,2),b=l[0],O=l[1],h=Object(c.useState)(!1),x=Object(j.a)(h,2),v=x[0],g=x[1],k=Object(j.a)(e.userAPI.isAdmin,1)[0],y=Object(j.a)(e.token,1)[0],w=Object(N.f)(),A=Object(N.g)(),S=Object(j.a)(e.productsAPI.products,1)[0],P=Object(c.useState)(!1),q=Object(j.a)(P,2),I=q[0],_=q[1],z=Object(j.a)(e.productsAPI.callback,2),E=z[0],F=z[1];Object(c.useEffect)((function(){A.id?(_(!0),S.forEach((function(e){e.id.toString()===A.id&&(n(e),O(e.images))}))):(_(!1),n(D),O(!1))}),[A.id,S]);var L=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,k){e.next=4;break}return e.abrupt("return",alert("Voc\xea n\xe3o \xe9 Admin"));case 4:if(a=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("Arquivo n\xe3o existe."));case 7:if(!(a.size>1048576)){e.next=9;break}return e.abrupt("return",alert("Tamanho muito grande."));case 9:if("image/jpeg"===a.type||"image/png"===a.type){e.next=11;break}return e.abrupt("return",alert("Formato do arquivo incorreto."));case 11:return(c=new FormData).append("file",a),g(!0),e.next=16,d.a.post("/api/upload",c,{headers:{"content-type":"multipart/form-data",Authorization:y}});case 16:r=e.sent,g(!1),O(r.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k){e.next=3;break}return e.abrupt("return",alert("Voc\xea n\xe3o \xe9 Admin"));case 3:return g(!0),e.next=6,d.a.post("/api/destroy",{public_id:b.public_id},{headers:{Authorization:y}});case 6:g(!1),O(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=e.target,a=t.name,c=t.value;n(Object(p.a)(Object(p.a)({},r),{},Object(C.a)({},a,c)))},$=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,k){e.next=4;break}return e.abrupt("return",alert("Voc\xea n\xe3o \xe9 Admin"));case 4:if(b){e.next=6;break}return e.abrupt("return",alert("Nenhuma imagem enviada"));case 6:if(!I){e.next=11;break}return e.next=9,d.a.put("/api/products/".concat(r.id),Object(p.a)(Object(p.a)({},r),{},{images:b}),{headers:{Authorization:y}}).then((function(e,t){alert("Produto atualizado com sucesso."),w("/")}));case 9:e.next=13;break;case 11:return e.next=13,d.a.post("/api/products",Object(p.a)(Object(p.a)({},r),{},{images:b}),{headers:{Authorization:y}});case 13:F(!E),w("/"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),alert(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),U={display:b?"block":"none"};return Object(m.jsxs)("div",{className:"create_product",children:[Object(m.jsxs)("div",{className:"upload",children:[Object(m.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:L}),v?Object(m.jsx)("div",{id:"file_img",children:Object(m.jsx)(V,{})}):Object(m.jsxs)("div",{id:"file_img",style:U,children:[Object(m.jsx)("img",{src:b?b.url:"",alt:""}),Object(m.jsx)("span",{onClick:R,children:"X"})]})]}),Object(m.jsxs)("form",{onSubmit:$,children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("label",{htmlFor:"product_id",children:"Product ID"}),Object(m.jsx)("input",{type:"text",name:"product_id",id:"product_id",required:!0,value:r.product_id,onChange:T,disabled:I})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("label",{htmlFor:"title",children:"Titulo"}),Object(m.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:r.title,onChange:T})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("label",{htmlFor:"price",children:"Valor: "}),Object(m.jsx)("input",{type:"number",name:"price",placeholder:"0",step:"0.1",id:"price",required:!0,value:r.price,onChange:T})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("label",{htmlFor:"description",children:"Descri\xe7\xe3o"}),Object(m.jsx)("textarea",{type:"text",name:"description",id:"description",required:!0,value:r.description,rows:"5",onChange:T})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("label",{htmlFor:"content",children:"Conte\xfado"}),Object(m.jsx)("textarea",{type:"text",name:"content",id:"content",required:!0,value:r.content,rows:"7",onChange:T})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("label",{htmlFor:"categories",children:"Categorias: "}),Object(m.jsxs)("select",{name:"category",value:r.category,onChange:T,children:[Object(m.jsx)("option",{value:"",children:"Selecione uma categoria"}),s.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),Object(m.jsx)("button",{type:"submit",children:I?"Atualizar":"Criar"})]})]})},R={name:"",email:"",cep:"",bairro:"",cidade:"",estado:"",numero:""};function T(){var e=Object(c.useContext)(f),t=Object(N.g)(),a=Object(N.f)(),r=Object(c.useState)(R),n=Object(j.a)(r,2),s=n[0],i=n[1],l=Object(j.a)(e.token,1)[0],b=Object(c.useState)(!1),O=Object(j.a)(b,2),h=O[0],x=O[1],v=Object(c.useState)(""),g=Object(j.a)(v,2),k=(g[0],g[1]);Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l){e.next=8;break}return e.next=4,d.a.get("/user/infor",{headers:{Authorization:l}});case 4:a=e.sent,c=a.data,k(a.data.name),t.id?(x(!0),a.data.id===Number(t.id)&&(console.log(c),i(c))):(x(!1),i(R));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[l,t.id]);var y=function(e){var t=e.target,a=t.name,c=t.value;console.log(e.target),i(Object(p.a)(Object(p.a)({},s),{},Object(C.a)({},a,c)))},w=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!h){e.next=7;break}return e.next=5,d.a.put("/user/update/".concat(s.id),s,{headers:{Authorization:l}}).then((function(e,t){alert("Usu\xe1rio atualizado com sucesso."),a("/")}));case 5:e.next=9;break;case 7:return e.next=9,d.a.post("/user/update_user",Object(p.a)({},s),{headers:{Authorization:l}});case 9:a("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{className:"form",onSubmit:w,children:[Object(m.jsxs)("div",{className:"profile-content",children:[Object(m.jsxs)("div",{className:"profile-setup",children:[Object(m.jsx)("h3",{className:"",children:"Configura\xe7\xe3o do perfil"}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{className:"",children:"Nome: "}),Object(m.jsx)("input",{className:"name",type:"text",name:"name",defaultValue:s.name,onChange:y,required:!0})]}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{className:"",children:"CEP: "}),Object(m.jsx)("input",{type:"text",placeholder:"00000-000",name:"cep",defaultValue:s.cep,onChange:y,required:!0})]}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{children:"N\xfamero: "}),Object(m.jsx)("input",{type:"text",placeholder:"",name:"numero",defaultValue:s.numero,onChange:y,required:!0})]}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{children:"Bairro: "}),Object(m.jsx)("input",{type:"text",placeholder:"Digite o seu bairro",name:"bairro",defaultValue:s.bairro,onChange:y,required:!0})]}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{children:"Cidade: "}),Object(m.jsx)("input",{className:"cidade",type:"text",placeholder:"Cidade",name:"cidade",defaultValue:s.cidade,onChange:y,required:!0})]}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{children:"Estado: "}),Object(m.jsx)("input",{type:"text",placeholder:"AA",name:"estado",defaultValue:s.estado,onChange:y,required:!0})]})]}),Object(m.jsxs)("div",{className:"profile-contact",children:[Object(m.jsx)("h3",{className:"",children:"Contato"}),Object(m.jsxs)("div",{className:"profile-input",children:[Object(m.jsx)("label",{children:"Email: "}),Object(m.jsx)("input",{type:"text",placeholder:"email@provider.com",name:"email",defaultValue:s.email,onChange:y,disabled:!0,required:!0})]})]})]}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"class-btn",children:Object(m.jsx)("button",{className:"btn",type:"submit",children:"Atualizar"})})]})})}var $=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e.userAPI.isLogged,1)[0],a=Object(j.a)(e.userAPI.isAdmin,1)[0];return Object(m.jsxs)(N.c,{children:[Object(m.jsx)(N.a,{path:"/",exact:!0,element:Object(m.jsx)(q,{})}),Object(m.jsx)(N.a,{path:"/login",exact:!0,element:t?Object(m.jsx)(z,{}):Object(m.jsx)(A,{})}),Object(m.jsx)(N.a,{path:"/detail/:id",exact:!0,element:Object(m.jsx)(E,{})}),Object(m.jsx)(N.a,{path:"/register",exact:!0,element:t?Object(m.jsx)(z,{}):Object(m.jsx)(I,{})}),Object(m.jsx)(N.a,{path:"/create_product",exact:!0,element:a?Object(m.jsx)(L,{}):Object(m.jsx)(z,{})}),Object(m.jsx)(N.a,{path:"/category",exact:!0,element:a?Object(m.jsx)(F,{}):Object(m.jsx)(z,{})}),Object(m.jsx)(N.a,{path:"/cart",exact:!0,element:Object(m.jsx)(_,{})}),Object(m.jsx)(N.a,{path:"*",exact:!0,element:Object(m.jsx)(z,{})}),Object(m.jsx)(N.a,{path:"/edit_product/:id",exact:!0,element:a?Object(m.jsx)(L,{}):Object(m.jsx)(z,{})}),Object(m.jsx)(N.a,{path:"/profile/:id",exact:!0,element:t?Object(m.jsx)(T,{}):Object(m.jsx)(z,{})})]})};var U=function(){return Object(m.jsx)(v,{children:Object(m.jsx)(s.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(w,{}),Object(m.jsx)($,{})]})})})};n.a.render(Object(m.jsx)(U,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.74cdd342.chunk.js.map